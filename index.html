<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sukh Shanti Dairy | Ladnun - Purity Guaranteed</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #1e40af; --secondary: #16a34a; --accent: #f59e0b; }
        body { font-family: 'Poppins', sans-serif; scroll-behavior: smooth; overflow-x: hidden; background: #f8fafc; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }

        .page-section { display: none; min-height: 100vh; animation: fadeInUp 0.5s ease-out; }
        .active-page { display: block; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Modern Hero Styling */
        .hero-section {
            background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.4)), url('https://images.unsplash.com/photo-1528498033373-3c6c08e93d79?auto=format&fit=crop&w=1600&q=80');
            background-size: cover; background-position: center; background-attachment: fixed;
        }
        .glass-morph { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.2); }
        
        /* Mobile 3-Column Grid Fix */
        @media (max-width: 768px) {
            .product-grid { grid-template-columns: repeat(3, 1fr) !important; gap: 8px !important; }
            .product-card { padding: 6px !important; border-radius: 12px !important; }
            .product-card img { height: 70px !important; border-radius: 8px !important; }
            .product-card h4 { font-size: 9px !important; height: 24px; overflow: hidden; margin-top: 4px !important; }
            .product-card .price { font-size: 10px !important; margin: 2px 0 !important; }
            .product-card .btn-group { flex-direction: column; gap: 4px !important; }
            .btn-action { font-size: 8px !important; padding: 4px 2px !important; border-radius: 4px !important; }
            .cat-title { font-size: 18px !important; }
        }

        /* Cart Sidebar */
        #cart-sidebar { transform: translateX(100%); transition: transform 0.3s ease-in-out; }
        #cart-sidebar.open { transform: translateX(0); }

        /* Toast Notification */
        #toast { visibility: hidden; min-width: 250px; background-color: #333; color: #fff; text-align: center; border-radius: 8px; padding: 16px; position: fixed; z-index: 1000; left: 50%; bottom: 30px; transform: translateX(-50%); }
        #toast.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }
        @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 30px; opacity: 1;} }
        @keyframes fadeout { from {bottom: 30px; opacity: 1;} to {bottom: 0; opacity: 0;} }
    </style>
</head>
<body>

    <!-- SIDE CART DRAWER -->
    <div id="cart-overlay" class="fixed inset-0 bg-black/50 z-[200] hidden" onclick="toggleCart()"></div>
    <div id="cart-sidebar" class="fixed top-0 right-0 h-full w-80 md:w-96 bg-white z-[210] shadow-2xl p-6 flex flex-col">
        <div class="flex justify-between items-center border-b pb-4">
            <h3 class="text-xl font-bold text-blue-900">Your Basket</h3>
            <button onclick="toggleCart()" class="text-gray-500 hover:text-red-500 text-2xl">&times;</button>
        </div>
        <div id="cart-items" class="flex-grow overflow-y-auto py-4 space-y-4">
            <!-- Items via JS -->
            <p class="text-center text-gray-400 mt-10">Your cart is empty!</p>
        </div>
        <div class="border-t pt-4">
            <div class="flex justify-between text-xl font-bold mb-4">
                <span>Total:</span>
                <span id="cart-total">₹0</span>
            </div>
            <button onclick="checkoutWhatsApp()" class="w-full bg-green-600 text-white py-4 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-green-700">
                <i class="fab fa-whatsapp text-xl"></i> Order on WhatsApp
            </button>
        </div>
    </div>

    <!-- NAVIGATION BAR -->
    <nav class="fixed top-0 w-full z-[150] bg-white/80 backdrop-blur-xl border-b border-gray-100 px-4 py-3">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center space-x-3 cursor-pointer" onclick="showPage('home')">
                <img src="https://image2url.com/r2/default/images/1770039019777-b6ddcba5-da4c-4281-b797-275e39166a24.png" alt="Logo" class="h-10 w-10 md:h-12 md:w-12 rounded-xl shadow-lg border border-blue-50">
                <div>
                    <h1 class="text-sm md:text-xl font-black text-blue-900 leading-none uppercase tracking-tighter">Sukh Shanti</h1>
                    <span class="text-[10px] md:text-xs font-bold text-green-600 uppercase tracking-[0.2em]">Dairy Ladnun</span>
                </div>
            </div>
            
            <div class="hidden md:flex items-center space-x-8 font-bold text-gray-600 text-sm">
                <a href="javascript:void(0)" onclick="showPage('home')" class="hover:text-blue-600 transition">Home</a>
                <a href="javascript:void(0)" onclick="showPage('shop')" class="hover:text-blue-600 transition">Products</a>
                <a href="javascript:void(0)" onclick="showPage('subscription')" class="hover:text-blue-600 transition">Subscriptions</a>
                <a href="javascript:void(0)" onclick="showPage('account')" class="hover:text-blue-600 transition bg-blue-50 px-4 py-2 rounded-lg text-blue-600">Admin</a>
            </div>

            <div class="flex items-center space-x-5">
                <div class="relative cursor-pointer group" onclick="toggleCart()">
                    <div class="bg-blue-100 p-2 md:p-3 rounded-full group-hover:bg-blue-600 transition-colors">
                        <i class="fas fa-shopping-basket text-lg md:text-xl text-blue-600 group-hover:text-white"></i>
                    </div>
                    <span id="cart-badge" class="absolute -top-1 -right-1 bg-red-500 text-white text-[10px] rounded-full h-5 w-5 flex items-center justify-center font-bold border-2 border-white">0</span>
                </div>
                <i class="fas fa-bars md:hidden text-2xl text-blue-900" onclick="showPage('account')"></i>
            </div>
        </div>
    </nav>

    <!-- PAGE 1: HOME -->
    <main id="home" class="page-section active-page pt-16">
        <!-- Modern Hero Section -->
        <section class="hero-section h-[85vh] flex items-center justify-center px-6">
            <div class="max-w-5xl w-full">
                <div class="glass-morph p-8 md:p-16 rounded-[2.5rem] shadow-2xl text-center border border-white/30">
                    <div class="inline-block px-4 py-1 bg-green-500/20 rounded-full border border-green-500/30 text-green-400 text-[10px] md:text-xs font-bold uppercase tracking-widest mb-6">
                        <i class="fas fa-star mr-2"></i> Ladnun's No. 1 Dairy Brand
                    </div>
                    <h2 class="text-4xl md:text-8xl font-black text-white mb-6 leading-tight">Pure Milk, <br><span class="text-blue-400">Pure Life.</span></h2>
                    <p class="text-gray-200 text-sm md:text-xl mb-10 font-medium max-w-2xl mx-auto leading-relaxed">Sukh Shanti Dairy brings you farm-fresh, unadulterated milk and dairy products directly to your doorstep in Ladnun city.</p>
                    <div class="flex flex-col md:flex-row justify-center gap-4">
                        <button onclick="showPage('shop')" class="bg-blue-600 text-white px-10 py-4 rounded-2xl font-black shadow-xl hover:bg-blue-700 transition transform hover:-translate-y-1">SHOP NOW <i class="fas fa-chevron-right ml-2 text-xs"></i></button>
                        <button onclick="showPage('subscription')" class="bg-white text-blue-900 px-10 py-4 rounded-2xl font-black shadow-xl hover:bg-gray-100 transition transform hover:-translate-y-1">MONTHLY PLANS</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dynamic Home Categories -->
        <div id="home-cats-container" class="max-w-7xl mx-auto px-4 py-16 space-y-20">
            <!-- Content Injected via JS -->
        </div>

        <!-- Trust Features -->
        <section class="bg-white py-20 border-y border-gray-100">
            <div class="max-w-7xl mx-auto px-6 grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
                <div>
                    <i class="fas fa-vial text-4xl text-blue-600 mb-4"></i>
                    <h5 class="font-bold text-lg">Lab Tested</h5>
                    <p class="text-gray-400 text-xs">Zero Adulteration</p>
                </div>
                <div>
                    <i class="fas fa-truck-fast text-4xl text-green-600 mb-4"></i>
                    <h5 class="font-bold text-lg">Fast Delivery</h5>
                    <p class="text-gray-400 text-xs">Morning 6 AM - 8 AM</p>
                </div>
                <div>
                    <i class="fas fa-house-chimney text-4xl text-blue-600 mb-4"></i>
                    <h5 class="font-bold text-lg">Farm Fresh</h5>
                    <p class="text-gray-400 text-xs">Direct from Farm</p>
                </div>
                <div>
                    <i class="fas fa-wallet text-4xl text-green-600 mb-4"></i>
                    <h5 class="font-bold text-lg">Easy Refund</h5>
                    <p class="text-gray-400 text-xs">No questions asked</p>
                </div>
            </div>
        </section>
    </main>

    <!-- PAGE 2: SHOP (CATALOG) -->
    <main id="shop" class="page-section pt-28 px-4">
        <div class="max-w-7xl mx-auto">
            <div class="flex flex-col md:flex-row md:items-end justify-between mb-12 gap-6">
                <div>
                    <h2 class="text-4xl font-black text-blue-900 mb-2 tracking-tighter">FRESH CATALOG</h2>
                    <p class="text-gray-500 font-medium">Explore Ladnun's finest dairy and bakery collection</p>
                </div>
                <div class="relative w-full md:w-96">
                    <input type="text" id="searchInput" onkeyup="searchItems()" placeholder="Search milk, ghee, rabdi..." class="w-full p-4 pl-14 rounded-2xl border-none shadow-xl outline-none focus:ring-2 focus:ring-blue-500">
                    <i class="fas fa-search absolute left-6 top-5 text-gray-400"></i>
                </div>
            </div>

            <div id="full-catalog" class="grid grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 md:gap-8">
                <!-- Products via JS -->
            </div>
            <div class="h-40"></div>
        </div>
    </main>

    <!-- PAGE 3: SUBSCRIPTION -->
    <main id="subscription" class="page-section pt-28 px-4">
        <div class="max-w-4xl mx-auto">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-black text-blue-900 mb-4">Monthly Subscriptions</h2>
                <p class="text-gray-500">Bina kisi rukawat ke, payein har subah taaza doodh.</p>
            </div>
            <div class="grid md:grid-cols-2 gap-10">
                <!-- Buffalo Plan -->
                <div class="bg-white p-10 rounded-[3rem] shadow-2xl border-t-[12px] border-blue-800 text-center transform transition hover:scale-105">
                    <div class="bg-blue-100 text-blue-800 w-20 h-20 flex items-center justify-center rounded-full mx-auto mb-6">
                        <i class="fas fa-mug-hot text-3xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-2">Buffalo Milk Plan</h3>
                    <p class="text-gray-400 mb-6 text-sm italic font-medium">Daily 1 Litre Delivered</p>
                    <div class="text-5xl font-black text-blue-900 mb-8">₹1,950<small class="text-sm font-normal text-gray-400">/mo</small></div>
                    <button onclick="whatsappSub('Buffalo Milk')" class="w-full bg-blue-800 text-white py-5 rounded-2xl font-bold shadow-lg shadow-blue-200 uppercase tracking-widest">Activate Plan</button>
                </div>
                <!-- Cow Plan -->
                <div class="bg-white p-10 rounded-[3rem] shadow-2xl border-t-[12px] border-green-600 text-center transform transition hover:scale-105">
                    <div class="bg-green-100 text-green-700 w-20 h-20 flex items-center justify-center rounded-full mx-auto mb-6">
                        <i class="fas fa-leaf text-3xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-2">Cow Milk Plan</h3>
                    <p class="text-gray-400 mb-6 text-sm italic font-medium">Daily 1 Litre Delivered</p>
                    <div class="text-5xl font-black text-green-700 mb-8">₹1,800<small class="text-sm font-normal text-gray-400">/mo</small></div>
                    <button onclick="whatsappSub('Cow Milk')" class="w-full bg-green-600 text-white py-5 rounded-2xl font-bold shadow-lg shadow-green-100 uppercase tracking-widest">Activate Plan</button>
                </div>
            </div>
        </div>
    </main>

    <!-- PAGE 4: ADMIN / DASHBOARD -->
    <main id="account" class="page-section pt-28 px-4 bg-slate-100">
        <div class="max-w-4xl mx-auto">
            <div class="bg-gray-900 p-8 md:p-12 rounded-[2.5rem] shadow-2xl text-white">
                <div class="flex justify-between items-center mb-10">
                    <h2 class="text-3xl font-bold">Admin Portal</h2>
                    <span class="bg-blue-600 px-4 py-1 rounded-full text-xs font-bold uppercase">Authorized Access Only</span>
                </div>
                <form id="productForm" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-2">
                            <label class="text-xs text-gray-400 font-bold uppercase ml-2">Product Title</label>
                            <input type="text" id="adminPName" class="w-full bg-gray-800 border-none p-4 rounded-xl outline-none focus:ring-2 focus:ring-blue-500" placeholder="e.g. Sardarshahar Rabdi" required>
                        </div>
                        <div class="space-y-2">
                            <label class="text-xs text-gray-400 font-bold uppercase ml-2">Category</label>
                            <select id="adminPCat" class="w-full bg-gray-800 border-none p-4 rounded-xl outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="Milk">Milk</option>
                                <option value="Dairy">Dairy</option>
                                <option value="Bakery">Bakery</option>
                                <option value="Special">Special</option>
                            </select>
                        </div>
                        <div class="space-y-2">
                            <label class="text-xs text-gray-400 font-bold uppercase ml-2">Price (₹)</label>
                            <input type="number" id="adminPPrice" class="w-full bg-gray-800 border-none p-4 rounded-xl outline-none focus:ring-2 focus:ring-blue-500" placeholder="0.00" required>
                        </div>
                        <div class="space-y-2">
                            <label class="text-xs text-gray-400 font-bold uppercase ml-2">Unit</label>
                            <input type="text" id="adminPUnit" class="w-full bg-gray-800 border-none p-4 rounded-xl outline-none focus:ring-2 focus:ring-blue-500" placeholder="kg / pkt / btl" required>
                        </div>
                    </div>
                    <button type="submit" class="w-full bg-white text-blue-900 py-5 rounded-2xl font-black text-lg hover:bg-gray-100 transition shadow-xl">PUBLISH PRODUCT</button>
                </form>
            </div>
            
            <div class="mt-12 p-8 bg-white rounded-3xl border border-gray-200">
                <h4 class="font-bold text-xl mb-6">Store Stats</h4>
                <div class="grid grid-cols-3 gap-4 text-center">
                    <div class="p-4 bg-blue-50 rounded-2xl"><div class="text-2xl font-black text-blue-900" id="stat-products">0</div><div class="text-[10px] uppercase font-bold text-gray-400">Items</div></div>
                    <div class="p-4 bg-green-50 rounded-2xl"><div class="text-2xl font-black text-green-700">450+</div><div class="text-[10px] uppercase font-bold text-gray-400">Clients</div></div>
                    <div class="p-4 bg-orange-50 rounded-2xl"><div class="text-2xl font-black text-orange-600">Active</div><div class="text-[10px] uppercase font-bold text-gray-400">Status</div></div>
                </div>
            </div>
            <div class="h-40"></div>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="bg-blue-950 text-white py-20 px-6 mt-20">
        <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-12">
            <div class="col-span-2">
                <h2 class="text-3xl font-black mb-6">SUKH SHANTI DAIRY</h2>
                <p class="text-gray-400 max-w-sm leading-relaxed mb-6 font-medium">Ladnun's most trusted dairy destination. Committed to delivering pure, farm-fresh milk and quality dairy products since 2010.</p>
                <div class="flex space-x-4 text-2xl">
                    <i class="fab fa-instagram hover:text-pink-500 cursor-pointer transition"></i>
                    <i class="fab fa-facebook-f hover:text-blue-500 cursor-pointer transition"></i>
                    <i class="fab fa-whatsapp hover:text-green-500 cursor-pointer transition"></i>
                </div>
            </div>
            <div>
                <h6 class="font-bold uppercase tracking-widest text-xs mb-8 text-blue-400">Quick Links</h6>
                <ul class="space-y-4 font-medium text-gray-300">
                    <li onclick="showPage('shop')" class="cursor-pointer hover:text-white">Full Catalog</li>
                    <li onclick="showPage('subscription')" class="cursor-pointer hover:text-white">Milk Subscriptions</li>
                    <li onclick="showPage('home')" class="cursor-pointer hover:text-white">About Us</li>
                    <li class="cursor-pointer hover:text-white">Terms & Conditions</li>
                </ul>
            </div>
            <div>
                <h6 class="font-bold uppercase tracking-widest text-xs mb-8 text-blue-400">Contact Ladnun</h6>
                <ul class="space-y-4 font-medium text-gray-300 text-sm">
                    <li><i class="fas fa-map-marker-alt mr-3 text-blue-400"></i> Near Railway Station Road, Ladnun</li>
                    <li><i class="fas fa-phone mr-3 text-blue-400"></i> +91 98XXX XXXXX</li>
                    <li><i class="fas fa-clock mr-3 text-blue-400"></i> Open: 4:00 AM - 9:00 PM</li>
                </ul>
            </div>
        </div>
        <div class="max-w-7xl mx-auto mt-20 pt-10 border-t border-white/10 text-center text-xs text-gray-500 font-bold uppercase tracking-widest">
            © 2026 Sukh Shanti Dairy Ladnun | Built for 100% Purity
        </div>
    </footer>

    <!-- TOAST NOTIFICATION -->
    <div id="toast">Product added to basket!</div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA STORE ---
        let products = [
            // MILK CATEGORY
            { id: 1, name: 'Bhens ka Dudh (Pure)', price: 65, unit: 'kg', cat: 'Milk', img: 'https://images.unsplash.com/photo-1550583724-b2692b85b150?auto=format&fit=crop&w=300&q=80' },
            { id: 2, name: 'Gaye ka Dudh (Pure)', price: 60, unit: 'kg', cat: 'Milk', img: 'https://images.unsplash.com/photo-1563636619-e9108b455242?auto=format&fit=crop&w=300&q=80' },
            { id: 3, name: 'Thanda Dudh Bottle', price: 30, unit: 'btl', cat: 'Milk', img: 'https://images.unsplash.com/photo-1528498033373-3c6c08e93d79?auto=format&fit=crop&w=300&q=80' },
            // DAIRY CATEGORY
            { id: 4, name: 'Desi Ghee (Danedar)', price: 900, unit: 'kg', cat: 'Dairy', img: 'https://images.unsplash.com/photo-1589927986089-35812388d1f4?auto=format&fit=crop&w=300&q=80' },
            { id: 5, name: 'Fresh Malai Paneer', price: 340, unit: 'kg', cat: 'Dairy', img: 'https://images.unsplash.com/photo-1596797038530-2c39efb07b37?auto=format&fit=crop&w=300&q=80' },
            { id: 6, name: 'Mitha Cup Dhai', price: 20, unit: 'cup', cat: 'Dairy', img: 'https://images.unsplash.com/photo-1485921325833-c519f76c4927?auto=format&fit=crop&w=300&q=80' },
            // BAKERY CATEGORY
            { id: 7, name: 'Milk Rusks (Toast)', price: 50, unit: 'pkt', cat: 'Bakery', img: 'https://images.unsplash.com/photo-1509440159596-0249088772ff?auto=format&fit=crop&w=300&q=80' },
            { id: 8, name: 'Coconut Biscuits', price: 120, unit: 'pkt', cat: 'Bakery', img: 'https://images.unsplash.com/photo-1495147466023-ac5c588e2e94?auto=format&fit=crop&w=300&q=80' },
            { id: 9, name: 'Brown Bread', price: 55, unit: 'pkt', cat: 'Bakery', img: 'https://images.unsplash.com/photo-1534353436294-0dbd4bdac845?auto=format&fit=crop&w=300&q=80' },
            // SPECIAL CATEGORY
            { id: 10, name: 'Sardarshahar ki Rabdi', price: 400, unit: 'kg', cat: 'Special', img: 'https://images.unsplash.com/photo-1589113103553-5683149944a3?auto=format&fit=crop&w=300&q=80' },
            { id: 11, name: 'Badam Milk Shake', price: 50, unit: 'btl', cat: 'Special', img: 'https://images.unsplash.com/photo-1571290274554-e915016f7ec0?auto=format&fit=crop&w=300&q=80' },
            { id: 12, name: 'Kavida Kesar Pista', price: 60, unit: 'cup', cat: 'Special', img: 'https://images.unsplash.com/photo-1501443762994-82bd5dace89a?auto=format&fit=crop&w=300&q=80' }
        ];

        let cart = [];

        // --- NAVIGATION LOGIC ---
        function showPage(pageId) {
            document.querySelectorAll('.page-section').forEach(p => p.classList.remove('active-page'));
            document.getElementById(pageId).classList.add('active-page');
            window.scrollTo(0,0);
        }

        // --- CART LOGIC ---
        function toggleCart() {
            const sidebar = document.getElementById('cart-sidebar');
            const overlay = document.getElementById('cart-overlay');
            sidebar.classList.toggle('open');
            overlay.classList.toggle('hidden');
        }

        function addToCart(productId) {
            const p = products.find(x => x.id === productId);
            const exists = cart.find(x => x.id === productId);
            if (exists) {
                exists.qty++;
            } else {
                cart.push({ ...p, qty: 1 });
            }
            updateCartUI();
            showToast(`Added: ${p.name}`);
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartUI();
        }

        function updateCartUI() {
            const container = document.getElementById('cart-items');
            const badge = document.getElementById('cart-badge');
            const totalEl = document.getElementById('cart-total');
            
            badge.innerText = cart.reduce((acc, curr) => acc + curr.qty, 0);
            
            if (cart.length === 0) {
                container.innerHTML = `<p class="text-center text-gray-400 mt-10">Your cart is empty!</p>`;
                totalEl.innerText = `₹0`;
                return;
            }

            let total = 0;
            container.innerHTML = cart.map((item, index) => {
                total += (item.price * item.qty);
                return `
                <div class="flex items-center gap-4 bg-gray-50 p-3 rounded-xl">
                    <img src="${item.img}" class="h-14 w-14 rounded-lg object-cover">
                    <div class="flex-grow">
                        <h4 class="text-xs font-bold leading-tight">${item.name}</h4>
                        <p class="text-blue-600 font-black text-sm">₹${item.price} x ${item.qty}</p>
                    </div>
                    <button onclick="removeFromCart(${index})" class="text-red-400 p-2"><i class="fas fa-trash"></i></button>
                </div>`;
            }).join('');
            totalEl.innerText = `₹${total}`;
        }

        // --- RENDER FUNCTIONS ---
        function renderHomeCategories() {
            const container = document.getElementById('home-cats-container');
            const categories = ['Milk', 'Dairy', 'Bakery', 'Special'];
            
            container.innerHTML = categories.map(cat => {
                const catProds = products.filter(p => p.cat === cat).slice(0, 3);
                return `
                <div class="category-wrapper">
                    <div class="flex justify-between items-end mb-8 border-l-4 border-blue-800 pl-4">
                        <div>
                            <h3 class="text-2xl md:text-4xl font-black text-blue-950 uppercase tracking-tighter">${cat} Essentials</h3>
                            <p class="text-gray-400 text-xs font-bold uppercase tracking-widest">Fresh from Ladnun</p>
                        </div>
                        <button onclick="showPage('shop')" class="text-blue-700 font-black text-[10px] md:text-sm uppercase tracking-widest hover:underline">View All <i class="fas fa-arrow-right ml-1"></i></button>
                    </div>
                    <div class="product-grid grid grid-cols-3 gap-3 md:gap-8">
                        ${catProds.map(p => createProductCard(p)).join('')}
                    </div>
                </div>`;
            }).join('');
        }

        function renderFullCatalog(items) {
            const container = document.getElementById('full-catalog');
            container.innerHTML = items.map(p => createProductCard(p)).join('');
        }

        function createProductCard(p) {
            return `
            <div class="bg-white p-3 md:p-6 rounded-2xl md:rounded-[2.5rem] shadow-sm border border-gray-100 product-card transform transition hover:-translate-y-2 hover:shadow-xl flex flex-col justify-between">
                <div>
                    <div class="relative overflow-hidden group rounded-xl md:rounded-3xl">
                        <img src="${p.img}" class="h-24 md:h-52 w-full object-cover transition duration-500 group-hover:scale-110">
                        <div class="absolute inset-0 bg-blue-900/10 group-hover:bg-transparent transition"></div>
                    </div>
                    <h4 class="font-bold text-gray-800 mt-3 md:mt-5 text-[10px] md:text-lg leading-tight">${p.name}</h4>
                    <p class="price font-black text-blue-800 my-1 md:my-3 text-xs md:text-2xl">₹${p.price}<small class="text-[8px] md:text-sm font-normal text-gray-400">/${p.unit}</small></p>
                </div>
                <div class="btn-group flex gap-1 md:gap-3 mt-2">
                    <button onclick="directOrder('${p.name}')" class="btn-action flex-1 bg-blue-900 text-white py-1.5 md:py-3 rounded-lg md:rounded-xl font-bold text-[8px] md:text-xs uppercase hover:bg-black transition">Buy</button>
                    <button onclick="addToCart(${p.id})" class="btn-action bg-gray-100 text-blue-900 p-1.5 md:px-4 rounded-lg md:rounded-xl font-bold text-[8px] md:text-xs hover:bg-blue-600 hover:text-white transition"><i class="fas fa-plus"></i></button>
                </div>
            </div>`;
        }

        // --- UTILS ---
        function showToast(msg) {
            const t = document.getElementById('toast');
            t.innerText = msg;
            t.className = "show";
            setTimeout(() => { t.className = t.className.replace("show", ""); }, 3000);
        }

        function searchItems() {
            const q = document.getElementById('searchInput').value.toLowerCase();
            const filtered = products.filter(p => p.name.toLowerCase().includes(q) || p.cat.toLowerCase().includes(q));
            renderFullCatalog(filtered);
        }

        function directOrder(name) {
            const msg = encodeURIComponent(`Hello Sukh Shanti Dairy! I want to buy: ${name}. Please share details.`);
            window.open(`https://wa.me/9198XXXXXXXX?text=${msg}`);
        }

        function whatsappSub(plan) {
            const msg = encodeURIComponent(`I want to subscribe to the ${plan} monthly plan. My address is in Ladnun.`);
            window.open(`https://wa.me/9198XXXXXXXX?text=${msg}`);
        }

        function checkoutWhatsApp() {
            if (cart.length === 0) return alert("Basket is empty!");
            let list = cart.map(item => `${item.name} (${item.qty} ${item.unit})`).join(', ');
            let total = document.getElementById('cart-total').innerText;
            const msg = encodeURIComponent(`New Order from Sukh Shanti Website: \nItems: ${list} \nTotal: ${total}`);
            window.open(`https://wa.me/9198XXXXXXXX?text=${msg}`);
        }

        // --- ADMIN LOGIC ---
        document.getElementById('productForm').onsubmit = (e) => {
            e.preventDefault();
            const newItem = {
                id: Date.now(),
                name: document.getElementById('adminPName').value,
                price: document.getElementById('adminPPrice').value,
                unit: document.getElementById('adminPUnit').value,
                cat: document.getElementById('adminPCat').value,
                img: 'https://images.unsplash.com/photo-1528498033373-3c6c08e93d79?auto=format&fit=crop&w=300&q=80'
            };
            products.unshift(newItem);
            renderHomeCategories();
            renderFullCatalog(products);
            document.getElementById('stat-products').innerText = products.length;
            alert(`${newItem.name} is now live on the store!`);
            e.target.reset();
        };

        // --- INITIALIZE ---
        window.onload = () => {
            renderHomeCategories();
            renderFullCatalog(products);
            document.getElementById('stat-products').innerText = products.length;
        };
    </script>
</body>
</html>